<ul>
    <li>Animais
        <ul>
            <li>Mamíferos
                <ul>
                    <li>Vacas</li>
                    <li>Macacos</li>
                    <li>Cachorros</li>
                    <li>Tigres</li>
                </ul>
            </li>
            <li>Outros
                <ul>
                    <li>Cobras</li>
                    <li>Pássaros</li>
                    <li>Lagartos</li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<script>
    let lis = document.querySelectorAll("li");

    for (li of lis) {
        let numero = document.querySelectorAll("li").length;

        if (numero) {
            li.firstChild.data += `[${numero}]`;
        }
    }
</script>